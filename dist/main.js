!function(e){var t={};function r(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var s=60,i=16;function n(e){return 4095&e}function a(e){return[(3840&e)>>8,255&e]}function h(e){return[(3840&e)>>8,(240&e)>>4]}var o=function(){function e(e,t,r){void 0===t&&(t=64),void 0===r&&(r=32);var n=this;this.memory=new Uint8Array(4096),this.registers=new Uint8Array(16),this.addressRegister=0,this.pc=512,this.sp=-1,this.stack=new Uint16Array(i),this.delayTimer=0,this.soundTimer=0,setInterval(function(){n.delayTimer-=1,n.soundTimer-=1},1e3/s),this.width=t,this.height=r,this.display=new Uint8Array(this.width*this.height),this.canvas=e,this.ctx=e.getContext("2d"),this._loadCharacters()}return e.prototype._loadCharacters=function(){for(var e=0,t=0,r=[[240,144,144,144,240],[32,96,32,32,112],[240,16,240,128,240],[240,16,240,16,240],[144,144,240,16,16],[240,128,240,16,240],[240,128,240,144,240],[240,16,32,64,64],[240,144,240,144,240],[240,144,240,16,240],[240,144,240,144,144],[224,144,224,144,224],[240,128,128,128,240],[224,144,144,144,224],[240,128,240,128,240],[240,128,240,128,128]];t<r.length;t++)for(var s=0,i=r[t];s<i.length;s++){var n=i[s];this.memory[e++]=n}},e.prototype.loadROMData=function(e){for(var t=0;t<e.length;++t)this.memory[this.pc+t]=e[t]},e.prototype.draw=function(){for(var e=this.canvas.width/this.width,t=this.canvas.height/this.height,r=0;r<this.height;++r)for(var s=0;s<this.width;++s){var i=r*this.width+s,n=this.display[i];this.ctx.fillStyle=n?"white":"black",this.ctx.fillRect(s*e,r*t,e,t)}},e.prototype.executeInstruction=function(e){switch((61440&e)>>12){case 0:if(224===e)this.display=this.display.map(function(){return 0});else{if(238!==e)return console.error("Unknown instruction: "+e.toString(16)),"break";this.pc=this.stack[this.sp],this.sp-=1}break;case 1:this.pc=n(e);break;case 2:this.sp+=1,this.stack[this.sp]=this.pc,this.pc=n(e);break;case 3:var t=a(e),r=t[0],s=t[1];this.registers[r]===s&&(this.pc+=2);break;case 4:var i=a(e);r=i[0],s=i[1];this.registers[r]!==s&&(this.pc+=2);break;case 5:var o=h(e),c=o[0],u=o[1];this.registers[c]===this.registers[u]&&(this.pc+=2);break;case 6:var d=a(e);r=d[0],s=d[1];this.registers[r]=s;break;case 7:var g=a(e);r=g[0],s=g[1];this.registers[r]+=s;break;case 8:var f=h(e);c=f[0],u=f[1];switch(15&e){case 0:this.registers[c]=this.registers[u];break;case 1:this.registers[c]|=this.registers[u];break;case 2:this.registers[c]&=this.registers[u];break;case 3:this.registers[c]^=this.registers[u];break;case 4:var l=this.registers[c]+this.registers[u];this.registers[c]=l,this.registers[15]=l>255?1:0;break;case 5:var p=this.registers[c]>this.registers[u];this.registers[c]=this.registers[c]-this.registers[u],this.registers[15]=p?1:0;break;case 6:var v=1&this.registers[c];this.registers[c]>>=1,this.registers[15]=v;break;case 7:p=this.registers[u]>this.registers[c];this.registers[c]=this.registers[u]-this.registers[c],this.registers[15]=p?1:0;break;case 14:var b=128&this.registers[c];this.registers[c]<<=1,this.registers[15]=b?1:0;break;default:return console.error("Unknown instruction: "+e.toString(16)),"break"}break;case 10:var y=n(e);this.addressRegister=y;break;case 13:for(var m=function(e){return[(3840&e)>>8,(240&e)>>4,15&e]}(e),k=(c=m[0],u=m[1],m[2]),w=this.registers[c],R=this.registers[u],x=0;x<k;++x)for(var S=this.memory[this.addressRegister+x],A=0;A<8;++A){var O=(S&1<<7-A)>>7-A,U=(R+x)*this.width+(w+A);this.display[U]&&O&&(this.registers[15]=1),this.display[U]^=O?1:0}this.draw();break;case 15:r=function(e){return(3840&e)>>8}(e);switch(255&e){case 41:this.addressRegister=5*this.registers[r];break;case 51:for(var _=this.registers[r],j=2;j>=0;--j)this.memory[this.addressRegister+j]=_%10,_/=10;break;case 85:for(j=0;j<=r;++j)this.memory[this.addressRegister+j]=this.registers[j];break;case 101:for(j=0;j<=r;++j)this.registers[j]=this.memory[this.addressRegister+j];break;case 30:this.addressRegister+=this.registers[r],this.addressRegister&=65535;break;default:return console.error("Unknown instruction: "+e.toString(16)),"break"}break;default:return console.error("Unknown instruction: "+e.toString(16)),"break"}},e.prototype.cycle=function(){var e=this.memory[this.pc]<<8|this.memory[this.pc+1];return this.pc+=2,this.executeInstruction(e)},e}();new Promise(function(e,t){var r=document.createElement("input");r.type="file",document.body.appendChild(r),r.addEventListener("input",function(){var t=r.files[0];r.remove(),e(t)})}).then(function(e){return function(e){return new Promise(function(t,r){var s=new FileReader;s.addEventListener("load",function(){t(s.result)}),s.readAsArrayBuffer(e)})}(e)}).then(function(e){var t=document.createElement("canvas");t.width=640,t.height=320,document.body.appendChild(t);var r=new o(t),s=new Uint8Array(e);r.loadROMData(s),window.requestAnimationFrame(function e(){r.cycle(),window.requestAnimationFrame(e)})})}]);